{% extends '@WebProfiler/Profiler/layout.html.twig' %}

{% block toolbar %}
    {% set icon %}
        {# this is the content displayed as a panel in the toolbar #}
        <svg xmlns="http://www.w3.org/2000/svg" width='24' height='24' viewBox='0 0 24 24'>
            <circle r='6' cx='8' cy='8' fill="none" stroke="#aaa" stroke-width="2" />
            <line x1='14' y1='14' x2='20' y2='20' stroke='#aaa' stroke-width='2' />
        </svg>
        <span class="sf-toolbar-value">{{ collector.getQueries|length }}</span>
    {% endset %}

    {% set text %}
        {# this is the content displayed when hovering the mouse over
           the toolbar panel #}
        <div class="sf-toolbar-info-piece">
            <b>Search Queries</b> <span>{{ collector.getRequests|length }}</span>
        </div>
    {% endset %}

    {# the 'link' value set to 'false' means that this panel doesn't
       show a section in the web profiler #}
    {{ include('@WebProfiler/Profiler/toolbar_item.html.twig', { link: true }) }}
{% endblock %}

{% block head %}
    {{ parent() }}
{% endblock %}

{% block menu %}
    <span class='label label-status-warning'>
        <span class='icon'>
            <svg xmlns="http://www.w3.org/2000/svg" width='24' height='24' viewBox='0 0 24 24'>
                <circle r='6' cx='8' cy='8' fill="none" stroke="#aaa" stroke-width="2" />
                <line x1='14' y1='14' x2='20' y2='20' stroke='#aaa' stroke-width='2' />
            </svg>
        </span>
        <strong>Search Queries</strong>
        <span class='count'><span>{{ collector.getQueries|length }}</span></span>
    </span>
{% endblock %}

{% block panel %}
    <h2>Queries</h2>
    <table class='alt'>
        <thead>
            <tr>
                <th>#</th>
                <th>Info</th>
            </tr>
        </thead>
        <tbody>
            {% for i, q in collector.getRequests %}
            <tr>
                <td>{{ i }}</td>
                <td>
                    Query string: <a href='{{ q['server'] }}/{{ q['query'] }}'>
                        "<b>{{ q['query'] }}</b>"
                    </a><br>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
